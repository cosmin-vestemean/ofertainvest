<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Oferta</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
      crossorigin="anonymous"
    />
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
      crossorigin="anonymous"
    ></script>
    <!--https://jsdelivr.com/package/npm/xlsx-->
    <script src="https://cdn.sheetjs.com/xlsx-0.20.2/package/dist/xlsx.full.min.js"></script>
    <!--load cytoscape-->
    <script src="https://cdn.jsdelivr.net/npm/cytoscape/dist/cytoscape.min.js"></script>
    <!-- Option 1: Include in HTML -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css"
    />
    <script src="https://unpkg.com/@feathersjs/client@^5.0.0/dist/feathers.js"></script>
    <script src="https://unpkg.com/socket.io-client@^4.0.0/dist/socket.io.js"></script>
    <script type="module" src="client.js"></script>
    <!--<link rel="stylesheet" href="client.css" />-->
    <link rel="stylesheet" href="sandstone.css" />
    <style>
      body {
        font-size: 12px;
        font-family: helvetica, 'Roboto', sans-serif;
      }

      a {
        text-decoration: none;
        color: black;
        font-size: 12px;
      }

      .form-select,
      .form-control,
      .btn {
        font-size: 12px;
        box-shadow: 0 0 5px 0 rgba(0, 0, 0, 0.1);
      }
      .cy {
        height: 100%;
        width: 100%;
        display: block;
        background-color: #f8f9fa;
      }
      .cantitate_articol_antemasuratori {
        width: 50px;
        border: 1px solid #dc3545;
      }
      .modal-header {
        padding: 5px;
      }
      #table_menu_content {
        position: absolute;
        left: 0;
        top: 0;
        padding: 10px;
        border-radius: 5px;
      }
    </style>
  </head>
  <body>
    <div class="container mt-2">
      <nav class="navbar navbar-expand-lg">
        <div class="container-fluid">
          <a class="navbar-brand" href="#"
            ><img
              src="https://www.invest-dej.com/templates/livecms/images/logo-inves.png"
              alt="logo"
              id="logo"
          /></a>
          <button
            class="navbar-toggler"
            type="button"
            data-bs-toggle="collapse"
            data-bs-target="#navbarNav"
            aria-controls="navbarNav"
            aria-expanded="false"
            aria-label="Toggle navigation"
          >
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav">
              <li class="nav-item dropdown">
                <a
                  class="nav-link dropdown-toggle"
                  href="#"
                  id="navbarDropdownMenuLink"
                  role="button"
                  data-bs-toggle="dropdown"
                  aria-expanded="false"
                >
                  Oferta
                </a>
                <ul class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                  <li>
                    <a
                      class="dropdown-item"
                      href="#"
                      onclick="document.getElementById('file_oferta_initiala').click()"
                      >Incarca oferta</a
                    >
                  </li>
                  <li>
                    <a class="dropdown-item" href="#">Salveaza oferta</a>
                  </li>
                  <li>
                    <a class="dropdown-item" href="#" id="vizualizare_oferta_initiala"
                      >Vizualizeaza oferta</a
                    >
                  </li>
                </ul>
              </li>
              <li class="nav-item dropdown">
                <a
                  class="nav-link dropdown-toggle"
                  href="#"
                  id="navbarDropdownMenuLink"
                  role="button"
                  data-bs-toggle="dropdown"
                  aria-expanded="false"
                >
                  AFL
                </a>
                <ul class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                  <li>
                    <a class="dropdown-item" id="listaAFL" href="#">Browse AFL</a>
                  </li>
                </ul>
              </li>
              <li class="nav-item dropdown">
                <a
                  class="nav-link dropdown-toggle"
                  href="#"
                  id="navbarDropdownMenuLink"
                  role="button"
                  data-bs-toggle="dropdown"
                  aria-expanded="false"
                >
                  Reteta
                </a>
                <ul class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                  <li>
                    <a class="dropdown-item" href="#" id="scan_oferta_initiala">Detectie automata retete</a>
                  </li>
                  <li>
                    <a class="dropdown-item" href="#" id="lista_activitati">Lista activitati oferta</a>
                  </li>
                  <li>
                    <a class="dropdown-item" href="#" id="lista_retete_scurta">Lista retete</a>
                  </li>
                  <li>
                    <a class="dropdown-item" href="#" id="lista_retete">Lista completa retete cu detalii</a>
                  </li>
                  <li>
                    <a class="dropdown-item" href="#" id="orfani">Intrari orfane</a>
                  </li>
                  <li>
                    <a class="dropdown-item" href="#">Vizualizare echivalente WBS</a>
                  </li>
                  <li>
                    <a class="dropdown-item" href="#" id="WBSMap">Vizualizare harta WBS</a>
                  </li>
                </ul>
              </li>
              <li class="nav-item dropdown">
                <a
                  class="nav-link dropdown-toggle"
                  href="#"
                  id="navbarDropdownMenuLink"
                  role="button"
                  data-bs-toggle="dropdown"
                  aria-expanded="false"
                >
                  Antemasuratori
                </a>
                <ul class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                  <li>
                    <a class="dropdown-item" id="listaAntemasuratori" href="#">Antemasuratori</a>
                  </li>
                </ul>
              </li>
              <li class="nav-item dropdown">
                <a
                  class="nav-link dropdown-toggle"
                  href="#"
                  id="navbarDropdownMenuLink"
                  role="button"
                  data-bs-toggle="dropdown"
                  aria-expanded="false"
                >
                  Fisa limita
                </a>
                <ul class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                  <li>
                    <a class="dropdown-item" id="listaFL" href="#">Lista achizitii materiale</a>
                  </li>
                </ul>
              </li>
              <li class="nav-item dropdown">
                <a
                  class="nav-link dropdown-toggle"
                  href="#"
                  id="navbarDropdownMenuLink"
                  role="button"
                  data-bs-toggle="dropdown"
                  aria-expanded="false"
                >
                  Grafic
                </a>
                <ul class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                  <li>
                    <a class="dropdown-item" href="#">Vizualizeaza ierarhii</a>
                  </li>
                </ul>
              </li>
              <li class="nav-item dropdown">
                <a
                  class="nav-link dropdown-toggle"
                  href="#"
                  id="navbarDropdownMenuLink"
                  role="button"
                  data-bs-toggle="dropdown"
                  aria-expanded="false"
                >
                  Documentatie
                </a>
                <ul class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                  <li>
                    <a class="dropdown-item" href="#">Utilizare interfata</a>
                  </li>
                  <li>
                    <a class="dropdown-item" href="#">Concepte</a>
                  </li>
                </ul>
              </li>
            </ul>
          </div>
        </div>
      </nav>
      <div class="row">
        <div class="col-sm">
          <label for="saldoc" class="form-label text-primary">Oferte</label>
          <select class="form-select form-select-sm" id="saldoc" aria-label="Saldoc"></select>
        </div>
        <div class="col-sm">
          <label for="trndate" class="form-label text-primary">Data</label>
          <input class="form-control form-control-sm" type="date" id="trndate" name="trndate" />
        </div>
        <div class="col-sm">
          <label for="trdr" class="form-label text-primary">Clienti</label>
          <select class="form-select form-select-sm" id="trdr" aria-label="Trader"></select>
        </div>
        <div class="col-sm">
          <label for="prjc" class="form-label text-primary">Proiecte</label>
          <select class="form-select form-select-sm" id="prjc" aria-label="Project"></select>
        </div>
      </div>
      <div class="row">
        <div class="col">
          <input
            class="form-control form-control-sm"
            type="file"
            id="file_oferta_initiala"
            name="file"
            accept=".xlsx"
          />
        </div>
        <div class="col-sm">
          <button type="button" id="btn_oferta" class="btn btn-success btn-sm">Oferta</button>
        </div>
        <div class="col-sm">
          <button type="button" id="btn_listaRetete" class="btn btn-info text-light btn-sm">
            Retete <i class="bi bi-list-ol"></i>
          </button>
        </div>
        <div class="col-sm">
          <button
            type="button"
            id="btn_oferta_initiala"
            class="btn btn-warning btn-sm text-light"
            data-bs-toggle="modal"
            data-bs-target="#ModalCytoscape"
          >
            Reprezentare grafica <i class="bi bi-graph-up"></i>
          </button>
        </div>
        <div class="col-sm">
          <button type="button" class="btn btn-primary btn-sm" id="btn_antemasuratori">
            Antemasuratori <i class="bi bi-list-ol"></i>
          </button>
        </div>
      </div>
      <div class="row">
        <select class="col-sm form-select form-select-sm" id="ierarhii" aria-label="Ierarhii"></select>
      </div>
      <div class="row">
        <div id="progress_bar_container" class="progress p-0">
          <div
            <div
            title="Progress Bar"
            id="progress_bar"
            class="progress-bar bg-dark"
            role="progressbar"
            aria-valuenow="0"
            aria-valuemin="0"
            aria-valuemax="100"
          ></div>
        </div>
        <label for="progress-bar" id="progress_bar_label" class="form-label text-primary">0%</label>
      </div>
      <div class="row">
        <my-table id="my_table_oferta_initiala"></my-table>
        <div class="col-2">
          <my-table id="my_table_recipes"></my-table>
        </div>
        <div class="col-10">
          <my-recipe id="my_table_detalii_reteta"></my-recipe>
        </div>
        <my-antemasuratori id="my_table_antemasuratori"></my-antemasuratori>
      </div>
      <!-- Modal generic -->
      <div
        class="modal fade"
        id="ModalGeneric"
        tabindex="-1"
        role="dialog"
        aria-labelledby="headerlLabel"
        aria-hidden="true"
      >
        <div id="genericContainer" class="modal-dialog modal-lg modal-dialog-scrollable role="document">
        <div class="modal-content">
          <div class="modal-body" id="modal-body3"></div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
          </div>
        </div>
      </div>
    </div>
    <!-- Modal cytoscape graph -->
    <div
      class="modal fade"
      id="ModalCytoscape"
      tabindex="-1"
      role="dialog"
      aria-labelledby="headerlLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog modal-dialog-scrollable modal-fullscreen" role="document">
        <div class="modal-content">
          <div class="modal-header" id="modal-header">
            <h5 class="modal-title m-2" id="headerlLabel">Reprezentare grafica</h5>
            <div id="select_graphs" class="col-sm-2 m-2"></div>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="cy" id="cytoscape_graphs"></div>
          <div class="modal-footer">
            <button id="btn_save_graph" type="button" class="btn btn-secondary" data-bs-dismiss="modal">
              Close
            </button>
          </div>
        </div>
      </div>
    </div>
    <!-- fixed button top up arrow -->
    <button
      type="button"
      id="btn_top"
      class="btn btn-secondary rounded-circle position-fixed bottom-0 end-0 m-2"
      data-toggle="tooltip"
      data-placement="top"
      title="Top"
    >
      <i class="bi bi-arrow-up"></i>
    </button>
    <!--another second button right to above, for showing/hiding all my-table header-->
    <button
      type="button"
      id="btn_showHideHeader"
      class="btn btn-primary rounded-circle position-fixed bottom-0 m-2"
      data-toggle="tooltip"
      data-placement="top"
      title="Show hide header. Reload dataset after show/hide"
    >
      <i class="bi bi-eye"></i>
    </button>
    <!--another button, left bottom fixed-->
    <button
      type="button"
      id="btn_column_filter"
      class="btn btn-secondary rounded-circle position-fixed bottom-0 start-0 m-2"
      data-toggle="tooltip"
      data-placement="top"
      title="Column filter"
    >
      <i class="bi bi-columns-gap"></i>
    </button>
    <script type="module">
      import { init } from './client.js'
      window.onload = init
    </script>
  </body>
</html>
